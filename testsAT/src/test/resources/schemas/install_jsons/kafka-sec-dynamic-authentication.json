{
  "id": "/kafka-sec",
  "cmd": "export PATH=$(ls -d $MESOS_SANDBOX/jre*/bin):$PATH && ./scheduler/bin/kafka-scheduler server ./scheduler/conf/scheduler.yml",
  "args": null,
  "user": null,
  "env": {
    "KAFKA_OVERRIDE_LEADER_IMBALANCE_CHECK_INTERVAL_SECONDS": "300",
    "LDAP_USER_MAIL": "mail",
    "KAFKA_OVERRIDE_OFFSET_METADATA_MAX_BYTES": "4096",
    "VAULT_HOST": "vault.service.paas.labs.stratio.com",
    "KAFKA_OVERRIDE_PRODUCER_PURGATORY_PURGE_INTERVAL_REQUESTS": "1000",
    "GOSEC_MANAGEMENT_ROOT_PATH": "/stratio/gosec",
    "KAFKA_OVERRIDE_ZOOKEEPER_SESSION_TIMEOUT_MS": "6000",
    "KAFKA_OVERRIDE_LEADER_IMBALANCE_PER_BROKER_PERCENTAGE": "10",
    "KAFKA_OVERRIDE_CONTROLLED_SHUTDOWN_MAX_RETRIES": "3",
    "KAFKA_CERTIFICATE_DOMAIN": "mesos",
    "LDAP_GROUP_MEMBER": "memberUid",
    "LDAP_AUTHENTICATION": "simple",
    "KAFKA_OVERRIDE_LOG_CLEANER_DEDUPE_BUFFER_SIZE": "134217728",
    "LD_LIBRARY_PATH": "/opt/mesosphere/lib",
    "KAFKA_OVERRIDE_CONTROLLER_SOCKET_TIMEOUT_MS": "30000",
    "KAFKA_OVERRIDE_OFFSETS_LOAD_BUFFER_SIZE": "5242880",
    "BROKER_MEM": "2304",
    "KAFKA_OVERRIDE_QUEUED_MAX_REQUESTS": "500",
    "KAFKA_OVERRIDE_LOG_CLEANER_IO_BUFFER_LOAD_FACTOR": "0.9",
    "GOSEC_CONFIG_ZOOKEEPER": "gosec1.node.paas.labs.stratio.com:2181,gosec2.node.paas.labs.stratio.com:2181,gosec3.node.paas.labs.stratio.com:2181",
    "KAFKA_OVERRIDE_OFFSETS_TOPIC_REPLICATION_FACTOR": "3",
    "BROKER_COUNT": "3",
    "KAFKA_OVERRIDE_QUOTA_CONSUMER_DEFAULT": "9223372036854775807",
    "KAFKA_OVERRIDE_INTER_BROKER_PROTOCOL_VERSION": "0.10.0.0",
    "BROKER_HEALTH_CHECK_MAX_FAILURES": "5",
    "LDAP_BASE": "cn=ldaproot,dc=stratio,dc=com",
    "KAFKA_OVERRIDE_LOG_CLEANER_DELETE_RETENTION_MS": "86400000",
    "LDAP_SCHEMA": "RFC2307bis",
    "KAFKA_OVERRIDE_CONFLUENT_SUPPORT_CUSTOMER_ID": "anonymous",
    "LDAP_GROUP_DESCRIPTION": "description",
    "LDAP_USER_DN": "ou=People,dc=stratio,dc=com",
    "KAFKA_OVERRIDE_OFFSETS_TOPIC_SEGMENT_BYTES": "104857600",
    "KRB5_DNS_DOMAIN": "demo.stratio.com",
    "BROKER_CPUS": "1",
    "KAFKA_OVERRIDE_LOG_FLUSH_OFFSET_CHECKPOINT_INTERVAL_MS": "60000",
    "KAFKA_OVERRIDE_OFFSETS_COMMIT_TIMEOUT_MS": "5000",
    "KAFKA_OVERRIDE_AUTO_CREATE_TOPICS_ENABLE": "true",
    "KAFKA_OVERRIDE_LOG_CLEANER_THREADS": "1",
    "JAVA_URI": "http://thirdparties.repository.stratio.com/kafkastratio/jre-8u112-linux-x64.tar.gz",
    "KAFKA_OVERRIDE_DELETE_TOPIC_ENABLE": "false",
    "KAFKA_OVERRIDE_MIN_INSYNC_REPLICAS": "1",
    "PHASE_STRATEGY": "INSTALL",
    "LDAP_USER_ID": "uid",
    "ENABLE_BROKER_HEALTH_CHECK": "true",
    "LDAP_TLS": "true",
    "REALM": "DEMO.STRATIO.COM",
    "KAFKA_OVERRIDE_QUOTA_PRODUCER_DEFAULT": "9223372036854775807",
    "KAFKA_OVERRIDE_GROUP_MIN_SESSION_TIMEOUT_MS": "6000",
    "GOSEC_CACHE_ENABLED": "true",
    "GOSEC_MANAGEMENT_SESSION_TIMEOUT": "6000",
    "KAFKA_OVERRIDE_SOCKET_RECEIVE_BUFFER_BYTES": "102400",
    "LDAP_PORT": "636",
    "KAFKA_OVERRIDE_COMPRESSION_TYPE": "producer",
    "BROKER_HEALTH_CHECK_DELAY_SEC": "15",
    "KADMIN_HOST": "idp.integration.labs.stratio.com",
    "KAFKA_ADVERTISE_HOST_IP": "true",
    "KAFKA_AUDIT_BOOTSTRAP_SERVERS": "gosec1.node.paas.labs.stratio.com:9092,gosec2.node.paas.labs.stratio.com:9092,gosec3.node.paas.labs.stratio.com:9092",
    "VAULT_TOKEN": "",
    "KAFKA_OVERRIDE_REPLICA_SOCKET_TIMEOUT_MS": "30000",
    "KAFKA_OVERRIDE_OFFSETS_RETENTION_CHECK_INTERVAL_MS": "600000",
    "KAFKA_OVERRIDE_SOCKET_REQUEST_MAX_BYTES": "104857600",
    "BROKER_HEALTH_CHECK_GRACE_SEC": "10",
    "BROKER_PORT": "9092",
    "KAFKA_OVERRIDE_OFFSETS_TOPIC_COMPRESSION_CODEC": "0",
    "KAFKA_OVERRIDE_LOG_CLEANER_ENABLE": "true",
    "KAFKA_OVERRIDE_DEFAULT_REPLICATION_FACTOR": "1",
    "KAFKA_OVERRIDE_LOG_ROLL_JITTER_HOURS": "0",
    "GOSEC_CACHE_TTL": "6000",
    "GOSEC_SECURITY_ENABLED": "true",
    "FRAMEWORK_ROLE": "kafka-sec",
    "KAFKA_OVERRIDE_LOG_SEGMENT_DELETE_DELAY_MS": "60000",
    "GOSEC_MANAGEMENT_CONNECTION_TIMEOUT": "6000",
    "LDAP_HOST": "idp.integration.labs.stratio.com",
    "KAFKA_OVERRIDE_SOCKET_SEND_BUFFER_BYTES": "102400",
    "KDC_PORT": "88",
    "KAFKA_OVERRIDE_BACKGROUND_THREADS": "10",
    "KAFKA_OVERRIDE_LOG_CLEANER_IO_BUFFER_SIZE": "524288",
    "KAFKA_OVERRIDE_NUM_REPLICA_FETCHERS": "1",
    "KAFKA_OVERRIDE_METRICS_NUM_SAMPLES": "2",
    "OVERRIDER_URI": "http://sodio.stratio.com/repository/snapshots/com/stratio/frameworks/kafka-config-overrider/1.1.0-RC2-SNAPSHOT/kafka-config-overrider-1.1.0-RC2-20170714.103355-2.zip",
    "KAFKA_OVERRIDE_AUTO_LEADER_REBALANCE_ENABLE": "true",
    "KAFKA_OVERRIDE_UNCLEAN_LEADER_ELECTION_ENABLE": "true",
    "KAFKA_OVERRIDE_NUM_RECOVERY_THREADS_PER_DATA_DIR": "1",
    "LDAP_USER_NAME": "cn",
    "LDAP_GROUP_ID": "cn",
    "BROKER_HEAP_MB": "2048",
    "KAFKA_OVERRIDE_OFFSETS_TOPIC_NUM_PARTITIONS": "50",
    "USER": "root",
    "PLACEMENT_STRATEGY": "NODE",
    "KAFKA_AUDIT_TOPIC": "audit",
    "KAFKA_OVERRIDE_OFFSETS_RETENTION_MINUTES": "1440",
    "KAFKA_OVERRIDE_LOG_FLUSH_SCHEDULER_INTERVAL_MS": "9223372036854775807",
    "MESOS_SECURITY_ENABLED": "true",
    "KAFKA_OVERRIDE_LOG_CLEANER_IO_MAX_BYTES_PER_SECOND": "1.7976931348623157E308",
    "KAFKA_OVERRIDE_OFFSETS_COMMIT_REQUIRED_ACKS": "-1",
    "KAFKA_OVERRIDE_QUOTA_WINDOW_SIZE_SECONDS": "1",
    "FRAMEWORK_PRINCIPAL": "kafka-sec",
    "KAFKA_OVERRIDE_REPLICA_HIGH_WATERMARK_CHECKPOINT_INTERVAL_MS": "5000",
    "KAFKA_OVERRIDE_LOG_RETENTION_HOURS": "168",
    "LDAP_GROUP_DN": "ou=Groups,dc=stratio,dc=com",
    "KADMIN_PORT": "749",
    "RECOVERY_GRACE_PERIOD_SEC": "1200",
    "BROKER_HEALTH_CHECK_INTERVAL_SEC": "10",
    "KAFKA_OVERRIDE_CONNECTIONS_MAX_IDLE_MS": "600000",
    "KAFKA_OVERRIDE_LOG_INDEX_INTERVAL_BYTES": "4096",
    "KAFKA_OVERRIDE_RESERVED_BROKER_MAX_ID": "1000",
    "KAFKA_OVERRIDE_LOG_CLEANER_BACKOFF_MS": "15000",
    "REPLACE_DELAY_SEC": "600",
    "LDAP_GROUP_QUERY_BY_USER": "(&amp;(objectClass=posixGroup)(memberUid=uid=%filter,ou=People,dc=stratio,dc=com))",
    "KAFKA_OVERRIDE_MESSAGE_MAX_BYTES": "1000012",
    "KAFKA_OVERRIDE_MAX_CONNECTIONS_PER_IP": "2147483647",
    "KAFKA_OVERRIDE_LOG_CLEANER_MIN_CLEANABLE_RATIO": "0.5",
    "LDAP_GROUP_QUERY_ALL": "(&amp;(objectClass=posixGroup))",
    "KAFKA_OVERRIDE_LOG_ROLL_HOURS": "168",
    "DISK_TYPE": "ROOT",
    "KAFKA_OVERRIDE_LOG_INDEX_SIZE_MAX_BYTES": "10485760",
    "KAFKA_OVERRIDE_QUOTA_WINDOW_NUM": "11",
    "KAFKA_OVERRIDE_REPLICA_FETCH_MIN_BYTES": "1",
    "VAULT_PORT": "8200",
    "KAFKA_OVERRIDE_REQUEST_TIMEOUT_MS": "30000",
    "KAFKA_OVERRIDE_LOG_FLUSH_INTERVAL_MESSAGES": "9223372036854775807",
    "KAFKA_OVERRIDE_LOG_RETENTION_CHECK_INTERVAL_MS": "300000",
    "EXECUTOR_URI": "http://sodio.stratio.com/repository/snapshots/com/stratio/frameworks/kafka-executor/1.1.0-RC2-SNAPSHOT/kafka-executor-1.1.0-RC2-20170714.103402-2.zip",
    "KAFKA_OVERRIDE_ZOOKEEPER_SYNC_TIME_MS": "2000",
    "KAFKA_OVERRIDE_REPLICA_LAG_TIME_MAX_MS": "10000",
    "KAFKA_OVERRIDE_NUM_NETWORK_THREADS": "3",
    "LDAP_USER_DESCRIPTION": "description",
    "LDAP_USER_QUERY_ALL": "(&amp;(objectClass=person))",
    "KAFKA_OVERRIDE_LOG_MESSAGE_FORMAT_VERSION": "0.10.0",
    "FRAMEWORK_NAME": "kafka-sec",
    "KAFKA_URI": "http://thirdparties.repository.stratio.com/kafkastratio/kafka_2.11-0.10.0.1.tgz",
    "KAFKA_OVERRIDE_CONTROLLED_SHUTDOWN_RETRY_BACKOFF_MS": "5000",
    "KAFKA_OVERRIDE_NUM_PARTITIONS": "1",
    "TENANT_PRINCIPAL": "dyplon-kafka",
    "BROKER_HEALTH_CHECK_TIMEOUT_SEC": "20",
    "ENABLE_REPLACEMENT": "false",
    "KAFKA_OVERRIDE_GROUP_MAX_SESSION_TIMEOUT_MS": "300000",
    "KDC_HOST": "idp.integration.labs.stratio.com",
    "KAFKA_OVERRIDE_REPLICA_FETCH_MAX_BYTES": "1048576",
    "KAFKA_OVERRIDE_CONTROLLED_SHUTDOWN_ENABLE": "true",
    "KAFKA_OVERRIDE_MAX_CONNECTIONS_PER_IP_OVERRIDES": "",
    "KAFKA_OVERRIDE_METRICS_SAMPLE_WINDOW_MS": "30000",
    "KAFKA_OVERRIDE_NUM_IO_THREADS": "8",
    "KAFKA_OVERRIDE_LOG_SEGMENT_BYTES": "1073741824",
    "KAFKA_OVERRIDE_LOG_PREALLOCATE": "false",
    "KAFKA_OVERRIDE_LOG_RETENTION_BYTES": "-1",
    "KAFKA_OVERRIDE_CONFLUENT_SUPPORT_METRICS_ENABLE": "false",
    "KAFKA_OVERRIDE_REPLICA_FETCH_WAIT_MAX_MS": "500",
    "KAFKA_OVERRIDE_FETCH_PURGATORY_PURGE_INTERVAL_REQUESTS": "1000",
    "LDAP_LINK_USER": "uid=%filter",
    "KAFKA_OVERRIDE_LOG_CLEANUP_POLICY": "delete",
    "BROKER_DISK": "5000",
    "KAFKA_ZOOKEEPER_URI": "zk-0001-zookeeperkafka.service.paas.labs.stratio.com:2181",
    "KAFKA_OVERRIDE_REPLICA_FETCH_BACKOFF_MS": "1000",
    "KAFKA_OVERRIDE_REPLICA_SOCKET_RECEIVE_BUFFER_BYTES": "65536",
    "APPROLE": {
      "secret": "role"
    },
    "KAFKA_VER_NAME": "kafka_2.11-0.10.0.1"
  },
  "instances": 1,
  "cpus": 1,
  "mem": 1230,
  "disk": 0,
  "gpus": 0,
  "executor": null,
  "constraints": null,
  "fetch": [
    {
      "uri": "http://thirdparties.repository.stratio.com/kafkastratio/jre-8u112-linux-x64.tar.gz"
    },
    {
      "uri": "http://sodio.stratio.com/repository/snapshots/com/stratio/frameworks/kafka-scheduler/1.1.0-RC2-SNAPSHOT/kafka-scheduler-1.1.0-RC2-20170714.103408-2.zip"
    },
    {
      "uri": "http://thirdparties.repository.stratio.com/kafkastratio/kafka_2.11-0.10.0.1.tgz"
    }
  ],
  "storeUrls": null,
  "backoffSeconds": 1,
  "backoffFactor": 1.15,
  "maxLaunchDelaySeconds": 3600,
  "container": null,
  "healthChecks": [
    {
      "protocol": "HTTP",
      "path": "/admin/healthcheck",
      "gracePeriodSeconds": 120,
      "intervalSeconds": 30,
      "timeoutSeconds": 5,
      "maxConsecutiveFailures": 3,
      "ignoreHttp1xx": false
    }
  ],
  "readinessChecks": [
    {
      "name": "confluentUpdateProgress",
      "protocol": "HTTP",
      "path": "/v1/plan",
      "portName": "api",
      "intervalSeconds": 30,
      "timeoutSeconds": 10,
      "httpStatusCodesForReady": [
        200
      ],
      "preserveLastResponse": true
    }
  ],
  "dependencies": null,
  "upgradeStrategy": {
    "minimumHealthCapacity": 0,
    "maximumOverCapacity": 0
  },
  "labels": {
    "DCOS_PACKAGE_RELEASE": "0",
    "DCOS_SERVICE_SCHEME": "http",
    "DCOS_PACKAGE_SOURCE": "http://iodo.stratio.com:8080/repo",
    "DCOS_PACKAGE_METADATA": "eyJwYWNrYWdpbmdWZXJzaW9uIjoiMy4wIiwibmFtZSI6ImthZmthLXN0cmF0aW8iLCJ2ZXJzaW9uIjoiMC4xLjEtMC4xMC4wLjEiLCJtYWludGFpbmVyIjoiZnJhbWV3b3JrczJAc3RyYXRpby5jb20iLCJkZXNjcmlwdGlvbiI6IkFwYWNoZSBLYWZrYSB3aXRoIEdvU2VjIGF1dGhlbnRpY2F0aW9uIGFuZCBhdXRob3JpemF0aW9uXG5cblx0IiwidGFncyI6WyJhdXRoZW50aWNhdGlvbiIsImF1dGhvcml6YXRpb24iLCJrZXJiZXJvcyIsImJyb2tlciIsImthZmthIiwidGxzIl0sInNlbGVjdGVkIjp0cnVlLCJmcmFtZXdvcmsiOnRydWUsInBvc3RJbnN0YWxsTm90ZXMiOiJBcGFjaGUgS2Fma2Egd2l0aCBhdXRoZW50aWNhdGlvbiBpcyBiZWluZyBpbnN0YWxsZWQuXG5cblx0RG9jdW1lbnRhdGlvbjogaHR0cHM6Ly93d3cuY29uZmx1ZW50LmlvL3doaXRlcGFwZXIvZGVwbG95aW5nLWNvbmZsdWVudC1wbGF0Zm9ybS13aXRoLW1lc29zcGhlcmVcblx0Q29tbXVuaXR5IFN1cHBvcnQ6IGh0dHBzOi8vZ3JvdXBzLmdvb2dsZS5jb20vZm9ydW0vIyFmb3J1bS9jb25mbHVlbnQtcGxhdGZvcm0iLCJwb3N0VW5pbnN0YWxsTm90ZXMiOiJBcGFjaGUgS2Fma2Egd2l0aCBhdXRoZW50aWNhdGlvbiBoYXMgYmVlbiB1bmluc3RhbGxlZC5cblBsZWFzZSBmb2xsb3cgdGhlIGluc3RydWN0aW9ucyBhdCBodHRwczovL2RvY3MubWVzb3NwaGVyZS5jb20vY3VycmVudC91c2FnZS9zZXJ2aWNlLWd1aWRlcy9rYWZrYS91bmluc3RhbGwgdG8gcmVtb3ZlIGFueSBwZXJzaXN0ZW50IHN0YXRlIGlmIHJlcXVpcmVkLiIsImxpY2Vuc2VzIjpbeyJuYW1lIjoiQXBhY2hlIExpY2Vuc2UgdjIiLCJ1cmwiOiJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29uZmx1ZW50aW5jL2thZmthL3RydW5rL0xJQ0VOU0UifV0sImltYWdlcyI6eyJpY29uLXNtYWxsIjoiaHR0cDovL2Fzc2V0cy5zdHJhdGlvLmNvbS9sb2dvcy9sb2dvX3N0cmF0aW9fdW5pdmVyc2UucG5nIiwiaWNvbi1tZWRpdW0iOiJodHRwOi8vYXNzZXRzLnN0cmF0aW8uY29tL2xvZ29zL2xvZ29fc3RyYXRpb191bml2ZXJzZS5wbmciLCJpY29uLWxhcmdlIjoiaHR0cDovL2Fzc2V0cy5zdHJhdGlvLmNvbS9sb2dvcy9sb2dvX3N0cmF0aW9fdW5pdmVyc2UucG5nIn19",
    "DCOS_PACKAGE_REGISTRY_VERSION": "3.0",
    "DCOS_SERVICE_NAME": "kafka-sec",
    "DCOS_PACKAGE_FRAMEWORK_NAME": "kafka-sec",
    "DCOS_SERVICE_PORT_INDEX": "1",
    "DCOS_PACKAGE_VERSION": "0.1.1-0.10.0.1",
    "DCOS_MIGRATION_API_PATH": "/v1/plan",
    "DCOS_PACKAGE_NAME": "kafka-stratio",
    "MARATHON_SINGLE_INSTANCE_APP": "true",
    "DCOS_PACKAGE_IS_FRAMEWORK": "true",
    "DCOS_MIGRATION_API_VERSION": "v1"
  },
  "acceptedResourceRoles": null,
  "ipAddress": null,
  "residency": null,
  "secrets": {
    "role": {
      "source": "kafka"
    }
  },
  "taskKillGracePeriodSeconds": null,
  "portDefinitions": [
    {
      "protocol": "tcp",
      "port": 10124,
      "name": "health"
    },
    {
      "protocol": "tcp",
      "port": 1,
      "name": "api"
    }
  ],
  "requirePorts": false
}